# Building Permit Form - Visual Layout Guide

## Main Window Layout

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║                    استمارة طلب ترخيص بناء - Building Permit Form            ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  ╔═══════════════════════════════════════════════════════════════════════╗  ║
║  ║ [السجلات] [الكروكي] [الاتجاهات] [البيانات الأساسية] ← Tabs           ║  ║
║  ╠═══════════════════════════════════════════════════════════════════════╣  ║
║  ║                                                                         ║  ║
║  ║                    Tab Content Area (1192 x 622 px)                    ║  ║
║  ║                                                                         ║  ║
║  ║                     [Content changes based on tab]                     ║  ║
║  ║                                                                         ║  ║
║  ║                                                                         ║  ║
║  ║                                                                         ║  ║
║  ╚═══════════════════════════════════════════════════════════════════════╝  ║
║                                                                               ║
║  [جديد]  [حفظ]  [حذف]  [طباعة]  ← Action Buttons                           ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝
                         1200 x 700 pixels
```

## Tab 1: البيانات الأساسية (Main Data)

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║  البيانات الأساسية (Main Data Tab)                                          ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  ┌─────────────────────────────────────────────────────────────────┐        ║
║  │ [Scrollable Panel]                                               │  ▲     ║
║  │                                                                   │  ║     ║
║  │  معلومات الجهة والمقدم ─────────────────────────────────────    │  ║     ║
║  │  اسم الجهة:              [________________________]              │  ║     ║
║  │  رقم الاستمارة:          [________________________]              │  S     ║
║  │  اسم مقدم الطلب:         [________________________]              │  c     ║
║  │  رقم الهاتف:            [________________________]              │  r     ║
║  │  نوع الترخيص:           [________________________]              │  o     ║
║  │  اسم المنطقة:           [________________________]              │  l     ║
║  │  اسم الوحدة:            [________________________]              │  l     ║
║  │  الطابق:                [________________________]              │  b     ║
║  │  توقيع مقدم الطلب:      [________________________]              │  a     ║
║  │                                                                   │  r     ║
║  │  بيانات المهندسين ──────────────────────────────────────────    │  ║     ║
║  │  اسم مهندس المنطقة:     [________________________]              │  ║     ║
║  │  توقيع مهندس المنطقة:   [________________________]              │  ║     ║
║  │  اسم مهندس المراجعة:    [________________________]              │  ║     ║
║  │  توقيع مهندس المراجعة:  [________________________]              │  ║     ║
║  │                                                                   │  ║     ║
║  │  بيانات الأرض والبناء ──────────────────────────────────────    │  ║     ║
║  │  مساحة الأرض (مساحي):    [________________________]              │  ║     ║
║  │  مساحة الأرض (إسقاط):    [________________________]              │  ║     ║
║  │  مساحة البناء:          [________________________]              │  ║     ║
║  │  البناء القائم:         [________________________]              │  ║     ║
║  │  ... (16 more fields)                                            │  ║     ║
║  │                                                                   │  ▼     ║
║  └─────────────────────────────────────────────────────────────────┘        ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

## Tab 2: الاتجاهات (Directions)

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║  الاتجاهات (Directions Tab)                                                  ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  ┌────────────────────────────┬────────────────────────────┐                ║
║  │  الجهة الشمالية (North)    │  الجهة الجنوبية (South)    │                ║
║  ├────────────────────────────┼────────────────────────────┤                ║
║  │ حدود الأرض:    [________]  │ حدود الأرض:    [________]  │                ║
║  │ بعد الأرض:     [________]  │ بعد الأرض:     [________]  │                ║
║  │ بعد البناء:    [________]  │ بعد البناء:    [________]  │                ║
║  │ الارتداد:      [________]  │ الارتداد:      [________]  │                ║
║  │ نوع الشارع:    [________]  │ نوع الشارع:    [________]  │                ║
║  │ رقم الشارع:    [________]  │ رقم الشارع:    [________]  │                ║
║  │ عرض الشارع:    [________]  │ عرض الشارع:    [________]  │                ║
║  │ حدود الموقف:   [________]  │ حدود الموقف:   [________]  │                ║
║  │ بعد الموقف:    [________]  │ بعد الموقف:    [________]  │                ║
║  │ مساحة الموقف:  [________]  │ مساحة الموقف:  [________]  │                ║
║  └────────────────────────────┴────────────────────────────┘                ║
║                                                                               ║
║  ┌────────────────────────────┬────────────────────────────┐                ║
║  │  الجهة الشرقية (East)      │  الجهة الغربية (West)      │                ║
║  ├────────────────────────────┼────────────────────────────┤                ║
║  │ حدود الأرض:    [________]  │ حدود الأرض:    [________]  │                ║
║  │ بعد الأرض:     [________]  │ بعد الأرض:     [________]  │                ║
║  │ بعد البناء:    [________]  │ بعد البناء:    [________]  │                ║
║  │ الارتداد:      [________]  │ الارتداد:      [________]  │                ║
║  │ نوع الشارع:    [________]  │ نوع الشارع:    [________]  │                ║
║  │ رقم الشارع:    [________]  │ رقم الشارع:    [________]  │                ║
║  │ عرض الشارع:    [________]  │ عرض الشارع:    [________]  │                ║
║  │ حدود الموقف:   [________]  │ حدود الموقف:   [________]  │                ║
║  │ بعد الموقف:    [________]  │ بعد الموقف:    [________]  │                ║
║  │ مساحة الموقف:  [________]  │ مساحة الموقف:  [________]  │                ║
║  └────────────────────────────┴────────────────────────────┘                ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

## Tab 3: الكروكي (Sketch)

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║  الكروكي (Sketch Tab)                                                         ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  نوع الكروكي:    [________________________________]                          ║
║                                                                               ║
║  مسار الصورة:    [________________________________] [...]                    ║
║                                                                               ║
║  ╔═══════════════════════════════════════════════════════════════════════╗  ║
║  ║                                                                         ║  ║
║  ║                                                                         ║  ║
║  ║                                                                         ║  ║
║  ║                                                                         ║  ║
║  ║                      Image Preview Area                                ║  ║
║  ║                                                                         ║  ║
║  ║                      (1000 x 500 px)                                   ║  ║
║  ║                                                                         ║  ║
║  ║                      PictureBox with Zoom mode                         ║  ║
║  ║                                                                         ║  ║
║  ║                                                                         ║  ║
║  ║                                                                         ║  ║
║  ╚═══════════════════════════════════════════════════════════════════════╝  ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

## Tab 4: السجلات (Records)

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║  السجلات (Records Tab)                                                        ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  بحث:  [_________________________]  [بحث]                                    ║
║                                                                               ║
║  ╔═══════════════════════════════════════════════════════════════════════╗  ║
║  ║ RequestId │ FormNumber │ ApplicantName │ Phone │ CreatedAt          ║  ║  ║
║  ╠═══════════════════════════════════════════════════════════════════════╣  ║
║  ║    1      │  F-001     │  أحمد محمد    │ 123   │ 2026-01-29       ║  ║  ║
║  ║    2      │  F-002     │  خالد علي     │ 456   │ 2026-01-28       ║  ║  ║
║  ║    3      │  F-003     │  سعيد حسن     │ 789   │ 2026-01-27       ║  ║  ║
║  ║    ...    │  ...       │  ...          │ ...   │ ...              ║  ║  ║
║  ║                                                                       ║  ║  ║
║  ║                    DataGridView (1150 x 540)                         ║  ║  ║
║  ║                                                                       ║  ║  ║
║  ║                 Double-click row to load record                      ║  ║  ║
║  ║                                                                       ║  ║  ║
║  ║                                                                       ║  ║  ║
║  ╚═══════════════════════════════════════════════════════════════════════╝  ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

## FormMain Window

```
╔═══════════════════════════════════════════════════════════════════════╗
║                  Public Works & Roads                                  ║
╠═══════════════════════════════════════════════════════════════════════╣
║                                                                         ║
║                                                                         ║
║         ╔════════════════════════════════════════════╗                 ║
║         ║  اختبار الاتصال بقاعدة البيانات           ║                 ║
║         ║  Test Database Connection                  ║                 ║
║         ╚════════════════════════════════════════════╝                 ║
║                                                                         ║
║         ╔════════════════════════════════════════════╗                 ║
║         ║  استمارة طلب ترخيص بناء                   ║                 ║
║         ║  Building Permit Form                      ║                 ║
║         ╚════════════════════════════════════════════╝                 ║
║                                                                         ║
║                                                                         ║
║                                                                         ║
╚═══════════════════════════════════════════════════════════════════════╝
                        640 x 360 pixels
```

## Database Relationships

```
BuildingPermitRequests (Parent)
    ├── RequestId (PK, IDENTITY)
    ├── FormNumber
    ├── ApplicantName
    ├── ... (27 more fields)
    └── CreatedAt
         │
         ├─────────────────┐
         │                 │
         ▼                 ▼
LandDirections         Sketches
    ├── DirectionId       ├── SketchId
    ├── RequestId (FK)    ├── RequestId (FK)
    ├── DirectionName     ├── SketchType
    ├── ... (9 fields)    └── SketchImage (VARBINARY)
    └── ON DELETE CASCADE  └── ON DELETE CASCADE
```

## User Workflow Diagram

```
┌─────────────────────────────────────────────────────────────────┐
│                        Start Application                         │
└────────────────────────┬────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────────┐
│                         FormMain                                 │
│  ┌───────────────────────────────────────────────────────┐      │
│  │  [اختبار الاتصال]  ← Test database connection        │      │
│  └───────────────────────────────────────────────────────┘      │
│  ┌───────────────────────────────────────────────────────┐      │
│  │  [استمارة الترخيص]  ← Open Building Permit Form      │      │
│  └───────────────────────────────────────────────────────┘      │
└────────────────────────┬────────────────────────────────────────┘
                         │ Click
                         ▼
┌─────────────────────────────────────────────────────────────────┐
│                    FormBuildingPermit                            │
│                                                                  │
│  ┌──────┬──────┬──────┬──────┐                                 │
│  │ Main │ Dir. │Sketch│Record│  ← Tabs                         │
│  └──────┴──────┴──────┴──────┘                                 │
│                                                                  │
│  [جديد] [حفظ] [حذف] [طباعة]  ← Action Buttons                 │
│     │      │      │      │                                      │
│     │      │      │      └──► Print permit                      │
│     │      │      └─────────► Delete selected record            │
│     │      └────────────────► Save current data                 │
│     └───────────────────────► Clear form for new entry          │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

## Data Entry Flow

```
1. Click "جديد" (New)
   ↓
2. Fill Main Tab (30 fields)
   - Entity info
   - Applicant info
   - Engineer info
   - Land/Building data
   ↓
3. Fill Directions Tab (44 fields)
   - North direction (11 fields)
   - South direction (11 fields)
   - East direction (11 fields)
   - West direction (11 fields)
   ↓
4. Upload Sketch (optional)
   - Select sketch type
   - Browse and select image
   - Preview image
   ↓
5. Click "حفظ" (Save)
   ↓
6. System saves:
   - BuildingPermitRequest (1 record)
   - LandDirections (4 records)
   - Sketches (1 record if provided)
   ↓
7. Success message displayed
   ↓
8. Records grid refreshed
```

## Field Count Summary

```
╔═══════════════════════════════════════════════════════════════╗
║                    Field Distribution                          ║
╠═══════════════════════════════════════════════════════════════╣
║                                                                ║
║  BuildingPermitRequest:                30 fields              ║
║  ├─ Entity/Applicant info:              9 fields              ║
║  ├─ Engineer info:                      4 fields              ║
║  └─ Land/Building data:                17 fields              ║
║                                                                ║
║  LandDirections (x4):                  44 fields total        ║
║  ├─ North:                             11 fields              ║
║  ├─ South:                             11 fields              ║
║  ├─ East:                              11 fields              ║
║  └─ West:                              11 fields              ║
║                                                                ║
║  Sketches:                              3 fields              ║
║  ├─ SketchType                          1 field               ║
║  └─ SketchImage                         1 field               ║
║                                                                ║
║  ════════════════════════════════════════════════════         ║
║  TOTAL:                                77 unique fields       ║
║  TOTAL (with IDs and FKs):             81 fields              ║
║                                                                ║
╚═══════════════════════════════════════════════════════════════╝
```

## Key Features Checklist

```
✅ Full CRUD Operations
   ├─ ✅ Create (Add new permit with all related data)
   ├─ ✅ Read (View all records, load individual record)
   ├─ ✅ Update (Edit existing permit and related data)
   └─ ✅ Delete (Remove permit with cascade delete)

✅ Search Functionality
   ├─ ✅ Search by Form Number
   ├─ ✅ Search by Applicant Name
   └─ ✅ Search by Request ID

✅ Data Management
   ├─ ✅ Four directions (North, South, East, West)
   ├─ ✅ Sketch/Image upload and storage
   ├─ ✅ Automatic ID generation
   └─ ✅ Timestamp tracking

✅ User Interface
   ├─ ✅ Arabic RTL support
   ├─ ✅ Organized tabs
   ├─ ✅ Scrollable forms
   ├─ ✅ Image preview
   └─ ✅ Data grid with sorting

✅ Security & Quality
   ├─ ✅ Parameterized queries
   ├─ ✅ SQL injection prevention
   ├─ ✅ Error handling
   ├─ ✅ Input validation
   └─ ✅ Resource management

✅ Documentation
   ├─ ✅ Database setup script
   ├─ ✅ User guide (Arabic/English)
   ├─ ✅ Build instructions
   ├─ ✅ Architecture documentation
   ├─ ✅ Quick reference guide
   └─ ✅ Visual layout guide
```

---

**Version**: 1.0  
**Platform**: Windows, .NET Framework 4.8  
**Database**: SQL Server Express or higher  
**UI Language**: Arabic (RTL supported)  
**Last Updated**: January 2026
